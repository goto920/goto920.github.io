(this["webpackJsonpsimple-mixer"]=this["webpackJsonpsimple-mixer"]||[]).push([[3],{107:function(e,t,r){"use strict";r.r(t);var n=r(26),o=r.n(n),s=r(40),a=r(4),i=r(5),c=r(13),u=r(7),d=r(8),p=r(23),f=r(47);var l=r(50);function h(e,t,r){return(h=Object(l.a)()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Object(f.a)(o,r.prototype),o}).apply(null,arguments)}function m(e){var t="function"===typeof Map?new Map:void 0;return(m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,Object(p.a)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(f.a)(n,e)})(e)}var g=r(52),v=r(54),b=function(){},y=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e,n,o){var s;return Object(a.a)(this,r),(s=t.call(this,e,n,o)).name=s.constructor.name,s.recording=o.processorOptions.recording,s.sampleRate=o.processorOptions.sampleRate,s.port.onmessage=s.messageProcessor.bind(Object(c.a)(s)),s._onUpdate=b,s._onEnd=b,s.recordedSamples=null,s._recordedBuffer=null,s.running=!0,s}return Object(i.a)(r,[{key:"node",get:function(){return this}},{key:"onEnd",set:function(e){this._onEnd=e}},{key:"onUpdate",set:function(e){this._onUpdate=e}},{key:"onUpdateInterval",set:function(e){this.port.postMessage({command:"onUpdateInterval",args:[e]})}},{key:"tempo",get:function(){return this.port.postMessage({command:"getTempo",args:[]}),this.tempo},set:function(e){this.port.postMessage({command:"setTempo",args:[e]})}},{key:"pitch",get:function(){return this.port.postMessage({command:"getPitch",args:[]}),this.pitch},set:function(e){this.port.postMessage({command:"setPitch",args:[e]})}},{key:"recordedBuffer",get:function(){return this._recordedBuffer}},{key:"stop",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.running){e.next=2;break}return e.abrupt("return");case 2:return console.log(this.name,".stop()"),e.next=5,this.port.postMessage({command:"stop",args:[]});case 5:this.disconnect(),this._onEnd(this._recordedBuffer),this.running=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"messageProcessor",value:function(e){if(e.data.command){var t=e.data,r=t.command,n=t.args;switch(r){case"End":this.stop();break;case"update":this._onUpdate(n[0])}}else if(e.data.status){var o=e.data.args[1];switch(e.data.args[0]){case"getTempo":this.tempo=o;break;case"getPitch":this.pitch=o}}else;}},{key:"exportToFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null;if(null!==t)r=t;else{if(null===this._recordedBuffer)return void console.log("output AudioBuffer is null");r=this._recordBuffer}var n=new Blob([v(r)],{type:"audio/vnd.wav"});Object(g.saveAs)(n,e)}},{key:"createRecordedBuffer",value:function(){if(this.recordedSamples){if(0===this.recordedSamples[0].length)return null;this._recordedBuffer=this.context.createBuffer(this.recordedSamples.length,this.recordedSamples[0].length,this.sampleRate);var e=this._recordedBuffer.getChannelData(0),t=this._recordedBuffer.getChannelData(1);return e.set(this.recordedSamples[0]),t.set(this.recordedSamples[1]),console.log(this.name,"createRecordedBuffer done"),this._recordedBuffer}console.log(this.name,"this.recordedBuffer empty")}}]),r}(m(AudioWorkletNode));t.default=y}}]);
//# sourceMappingURL=3.e6e2ee08.chunk.js.map